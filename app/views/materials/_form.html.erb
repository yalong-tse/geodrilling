<% content_for(:page_header_description, "材料入库的界面") %>
<%= content_for :page_specific_stylesheets do %>
  <%= stylesheet_link_tag "jquery-ui-1.10.3.custom.min" %>
  <%= stylesheet_link_tag "chosen" %>
  <%= stylesheet_link_tag 'datepicker' %>
<% end %>

<%= content_for :page_specific_javascripts do %>
  <%= javascript_include_tag 'jquery-ui-1.10.3.custom.min' %>
  <%= javascript_include_tag 'jquery.ui.touch-punch.min' %>
  <%= javascript_include_tag 'chosen.jquery.min' %>
  <%= javascript_include_tag 'fuelux/fuelux.spinner.min' %>
  <%= javascript_include_tag 'date-time/moment.min' %>
  <%= javascript_include_tag 'date-time/bootstrap-datepicker.min' %>
  <%= javascript_include_tag 'date-time/bootstrap-timepicker.min' %>
  <%= javascript_include_tag 'date-time/daterangepicker.min' %>
  <%= javascript_include_tag 'bootstrap-colorpicker.min' %>
<% end %>
<%= form_for(@material , :html=>{:class=>"form-horizontal"}) do |f| %>
  <% if @material.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@material.errors.count, "error") %> prohibited this material from being saved:</h2>

      <ul>
      <% @material.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row-fluid">
  <div class="span12">
  <div class="control-group">
    <%= f.label "钻孔", :class=>"control-label" %>
    <div class="controls">
      <%= f.select(:holeid,options_for_select(Hole.unclosed.collect{|d| ["钻孔编号:["+d.holenumber+"],合同名称:"+ d.contract.name ,d.id]}),{},{:class=>"input-xxlarge"} ) %>
    </div>
  </div>
  </div>
  </div>

  <div class="row-fluid">
  <div class="span5">
  <div class="control-group">
    <%= f.label "材料名称", :class=>"control-label" %>
    <div class="controls">
      <%= f.select(:name,options_for_select(Dictionary.material.collect{|d| [d.item,d.item]}),{:class=>"input-large"} ) %>
    </div>
  </div>
  </div>

  <div class="span5">
  <div class="control-group">
    <%= f.label "材料规格", :class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :model , :class=>"input-large" %>
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span5">
  <div class="control-group">
    <%= f.label "单价", :class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :price , :class=>"input-large" %>
    </div>
  </div>
  </div>

  <div class="span5">
  <div class="control-group">
    <%= f.label "数量" , :class=>"control-label" %>
    <div class="controls">
      <%= f.number_field :count, :class=>"input-large" , :value=>"5" %>
    </div>
  </div>
  </div>
  </div>

  <div class="row-fluid">
  <div class="span5">
  <div class="control-group">
    <%= f.label "入库时间" , :class=>"control-label" %>
    <div class="controls">
      <div class="input-append">
      <%= f.text_field :stockdate, :class=>"input-large",:value=>Time.now.strftime("%Y-%m-%d") %><span class="add-on"><i class="icon-calendar"></i></span>
      </div>
    </div>
  </div>
  </div>

  <div class="span5">
  <div class="control-group">
    <%= f.label "记录人" , :class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :recorder,  :class=>"input-large", :placeholder=>"" %>
    </div>
  </div>
  </div>
  </div>

  <div class="row-fluid">
  <div class="span5">
  <div class="control-group">
    <%= f.label "生成厂商" , :class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :manufacture, :class=>"input-large" %>
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span5">
  <div class="control-group">
    <%= f.label "备注" , :class=>"control-label" %>
    <div class="controls">
      <%= f.text_area :remark, :class=>"input-xxlarge", :rows=>"4"%>
    </div>
  </div>
  </div>
  </div>

  <div class="form-actions">
    <%= f.submit  "保存", :class=>"btn btn-primary"%>
    <%= link_back :class=>'btn btn-info' %>
  </div>
<% end %>
<%= content_for :inline_javascripts do %>
<%= make_datepicker("#material_stockdate") %>
<script type="text/javascript">

  $(function(){

  $(".ace-popover").popover();
        no_file:'未选择文件 ...',
        btn_choose:'选择',
        btn_change:'重新选择',
        droppable:false,
        onchange:null,
        thumbnail:false //| true | large
        //whitelist:'gif|png|jpg|jpeg'
        //blacklist:'exe|php'
        //onchange:''
        //
        });
  
  $("#new_material").validate({
    rules:{
    "material[name]":{required:true},
    "material[model]":{required:true},
    "material[price]":{required:true},
    "material[count]":{required:true}
    },
  messages:{
  "hole[minearea]":{required:"矿区不能为空"},
  "hole[contract_id]":{required:"必须选择合同名称"},
  "hole[holenumber]":{required:"孔号不能为空"}

    }
    
    });

  });

</script>
<% end %>
