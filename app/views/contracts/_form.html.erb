# -*- coding: utf-8 -*-
<% content_for(:page_header_description, "录入合同的基本信息,合同编号唯一，合同正文通过附件上传") %>
<%= content_for :page_specific_stylesheets do %>
  <%= stylesheet_link_tag "jquery-ui-1.10.3.custom.min" %>
  <%= stylesheet_link_tag "chosen" %>
  <%= stylesheet_link_tag 'datepicker' %>
  <%= stylesheet_link_tag 'bootstrap-override' %>
<% end %>

<%= content_for :page_specific_javascripts do %>
  <%= javascript_include_tag 'jquery-ui-1.10.3.custom.min' %>
  <%= javascript_include_tag 'jquery.ui.touch-punch.min' %>
  <%= javascript_include_tag 'chosen.jquery.min' %>
  <%= javascript_include_tag 'fuelux/fuelux.spinner.min' %>
  <%= javascript_include_tag 'date-time/moment.min' %>
  <%= javascript_include_tag 'date-time/bootstrap-datepicker.min' %>
  <%= javascript_include_tag 'date-time/bootstrap-timepicker.min' %>
  <%= javascript_include_tag 'date-time/daterangepicker.min' %>
  <%= javascript_include_tag 'bootstrap-colorpicker.min' %>
<% end %>

<%= form_for @contract, :html=>{:multipart=>true, :class=>"form-horizontal"}  do |f|  %>
  <% if @contract.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@contract.errors.count, "error") %> prohibited this contract from being saved:</h2>

      <ul>
      <% @contract.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row-fluid">
  <div class="span6">
  <div class="control-group">
    <%= f.label "合同编号" ,:class=>"control-label" %>
    <div class="controls">
    <%= f.text_field :contractno, :class=>"text_field",:placeholder=>"zt20130001" %>
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span12">
  <div class="control-group">
    <%= f.label "合同名称" ,:class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :name , :class=>"input-xxlarge",:placeholder=>"机械岩心钻探合同书" %>
    </div>
  </div>
  </div>
  </div>

  <div class="row-fluid">
  <div class="span12">
  <div class="control-group">
    <%= f.label "项目名称" ,:class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :projectname, :class=>"input-xxlarge", :size=>50, :placeholder=>"河南省小秦岭金矿田北矿带F5矿脉深部金矿普查（Ⅰ标段）" %>
    </div>
  </div>
  </div>
  </div>

  
  <div class="row-fluid">
  <div class="span12">
  <div class="control-group">
    <%= f.label "项目所在地" ,:class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :projectaddr, :class=>"input-xxlarge" ,:placeholder=>"河南省洛阳市XX县" %>
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span6">
  <div class="control-group">
    <%= f.label "合同业主" ,:class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :owner, :class=>"input-large" ,:placeholder=>"郑州四院" %>
    </div>
  </div>
  </div>

  <div class="span6">
  <div class="control-group">
    <%= f.label "合同乙方" ,:class=>"control-label" %>
    <div class="controls">
      <%= f.text_field :buyerparty, :class=>"input-large" ,:placeholder=>"郑州四院" %>
    </div>
  </div>
  </div>
  </div>

  <div class="row-fluid">
  <div class="span6">
  <div class="control-group">
    <%= f.label "资金来源" ,:class=>"control-label" %>
    <div class="controls">
      <%= f.select(:fundsource , options_for_select(Dictionary.fundsource.collect{|d|[d.item,d.id]}), :class=>"span4",:prompt=>"请选择") %>
    </div>
  </div>
  </div>

  <div class="span6">
  <div class="control-group">
    <%= f.label "合同金额" ,:class=>"control-label" %>
    <div class="controls">
      <div class="input-append">
        <%= f.text_field :contractamount, :class=>"text_field" ,:placeholder=>"10,000" %><span class="add-on">元</span>
      </div>
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span6">
  <div class="control-group">
    <%= f.label "合同状态",:class=>"control-label" %>
    <div class="controls">
      <%= f.select(:status , options_for_select(Contract::STATUS), :class=>"span4",:prompt=>"请选择") %>
    </div>
  </div>
  </div>

  <div class="span6">
  <div class="control-group">
    <%= f.label "签订日期", :class=>"control-label" %>
    <div class="controls ">
      <div class="input-append">
      <%= f.text_field :signdate ,:class=>"text_field",:placeholder=>"2013-04-05" %><span class="add-on"><i class="icon-calendar"></i></span>
    </div>
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span6">
  <div class="control-group">
    <%= f.label "开始日期", :class=>"control-label" %>
    <div class="controls">
      <div class="input-append">
        <%= f.text_field :startdate, :class=>"text_field" , :placeholder=>"2013-05-03"%><span class="add-on"><i class="icon-calendar"></i></span>

    </div>
    </div>
  </div>
  </div>

  <div class="span6">
  <div class="control-group">
    <%= f.label "截止日期", :class=>"control-label"%>
    <div class="controls">
    <div class="input-append">
      <%= f.text_field :finishdate, :class=>"text_field"%><span class="add-on"><i class="icon-calendar"></i></span>
    </div>
    </div>
  </div>
  </div>
  </div>

  <div class="row-fluid">
  <div class="span5">
  <div class="control-group">
    <%= f.label "合同附件",:class=>"control-label" %>
    <div class="controls">
      <input name="attachment" type="file" id="_contract_file" />
    </div>
  </div>
  </div>
  </div>


  <div class="row-fluid">
  <div class="span12">
  <div class="control-group">
    <%= f.label "备注",:class=>"control-label" %>
    <div class="controls">
      <%= f.text_area :remark,:class=>"input-xxlarge",:rows=>3,:cols=>20 %>
    </div>
  </div>
  </div>
  </div>


  <div class="form-actions">
    <%= f.submit "新增合同" , :class=>"btn btn-primary" %>
    <%= link_back :class=>'btn btn-info'%>
  </div>
<% end %>
<%= content_for :inline_javascripts do %>
  <%= make_datepicker("#contract_startdate") %>
  <%= make_datepicker("#contract_finishdate") %>
  <%= make_datepicker("#contract_signdate") %>
  <script type="text/javascript">

  $(function(){
  $('#_contract_file').ace_file_input({
        no_file:'未选择文件 ...',
        btn_choose:'选择',
        btn_change:'重新选择',
        droppable:false,
        onchange:null,
        thumbnail:false //| true | large
        //whitelist:'gif|png|jpg|jpeg'
        //blacklist:'exe|php'
        //onchange:''
        //
        });
  });
  </script>
<% end %>
