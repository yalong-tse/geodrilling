<% content_for(:title,"库存管理") %>
<% content_for(:page_header_description, "分类查看设备的库存情况") %>
<%= content_for :page_specific_stylesheets do %>
  <%= stylesheet_link_tag 'jquery-ui-1.10.3.custom.min' %>
  <%= stylesheet_link_tag 'jquery.gritter.css' %>
<% end %>
<div class="tabbable">
  <ul class="nav nav-tabs" id="_tabs">
    <li class="active">
    <a href="#tab1" data-toggle="tab">
      <i class="pink icon-dashboard bigger-110"></i>
      钻机
    </a>
    </li>
    <li> 
    <a href="#tab2" data-toggle="tab">
      <i class="blue icon-user bigger-110"></i>
      钻塔
    </a>
    </li>
    <li> 
    <a href="#tab3" data-toggle="tab">
      <i class="icon-rocket"></i>
      泥浆泵
    </a>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="tab1">
      <table id="_rigmachine_table" class="table table-striped table-hover table-bordered">
        <thead>
        <tr>
          <th>设备编号</th>
          <th>钻机型号</th>
          <th>钻机重量</th>
          <th>钻孔深度</th>
          <th>钻机功率</th>
          <th>转速</th>
          <th>钻孔直径</th>
          <th>厂商</th>
          <th>占用状态</th>
        </tr>
      </thead>
      <tbody></tbody>
      </table>
    </div>
    <div class="tab-pane" id="tab2">
      <table class="table table-striped table-hover table-bordered">
        <tr>
          <th>设备编号</th>
          <th>型号</th>
          <th>有效载荷</th>
          <th>深度</th>
          <th>高度</th>
          <th>提升钻杆根数与长度</th>
          <th>滑车组数与减轻负荷倍数</th>
          <th>顶宽尺寸</th>
          <th>重量</th>
          <th>厂商</th>
          <th>占用状态</th>
          <th>设备履历</th>
        </tr>
        <% @drilltower.each do |tower| %>
          <tr>
            <td> <%= tower.devicenumber %> </td>
            <td> <%= tower.model %> </td>
            <td> <%= tower.effectiveload %> </td>
            <td> <%= tower.deep %> </td>
            <td> <%= tower.height %> </td>
            <td> <%= tower.pipequantityAndLenght %> </td>
            <td> <%= tower.sheaveQuantity %> </td>
            <td> <%= tower.topsize %> </td>
            <td> <%= tower.weight %> </td>
            <td> <%= tower.manufacture %> </td>
            <td> <%= device_status tower.status %></td>
            <td> <button class="btn btn-small btn-info" onclick="javascript:drilltower_resume('<%=tower.devicenumber %>')">查看</button> </td>
          </tr>
        <% end %>
      </table>
    </div>
    <div class="tab-pane" id="tab3">
      <table class="table table-striped table-hover table-bordered">
        <tr>
          <th>设备编号</th>
          <th>型号</th>
          <th>缸径</th>
          <th>缸数</th>
          <th>冲程</th>
          <th>冲次</th>
          <th>流量</th>
          <th>重量</th>
          <th>功率</th>
          <th>压力</th>
          <th>外观尺寸</th>
          <th>占用状态</th>
          <th>设备履历</th>
        </tr>
        <% @pump.each do |pump| %>
          <tr>
            <td> <%= pump.devicenumber %>  </td>
            <td> <%= pump.pumpmodel %>  </td>
            <td> <%= pump.pumpDiameter %>  </td>
            <td> <%= pump.pumplineNumber %>  </td>
            <td> <%= pump.stroke %>  </td>
            <td> <%= pump.traffic %>  </td>
            <td> <%= pump.weight %>  </td>
            <td> <%= pump.power %>  </td>
            <td> <%= pump.pressure %>  </td>
            <td> <%= pump.overallsize %>  </td>
            <td> <%= pump.pressure %>  </td>
            <td> <%= device_status pump.status %>  </td>
            <td><button class="btn btn-small btn-info" onclick="javascript:pump_resume('<%=pump.devicenumber %>')" >查看</button> </td>
          </tr>
        <% end %>
      </table>

    </div>
  </div>
</div>
<br />
<% content_for :page_specific_javascripts do %>
  <%= javascript_include_tag 'jquery.dataTables.min' %>
  <%= javascript_include_tag 'jquery.dataTables.bootstrap' %>
<% end %>
<% content_for :inline_javascripts do %>
<script language="javascript">
  $(function(){
   var oTable1=$("#_rigmachine_table").dataTable({
        "aoColumns":[null,null,null,null,null,null,null,null,null],
        "bProcessing":true,
        "bServerSide":true,
        "bAutoWidth" : false,
        "sAjaxSource":"<%=rigmachine_index_path(:format=>:json) %>",
        "oLanguage":{
        "sLengthMenu":"每页 _MENU_",
        "sZeroRecords":"对不起,没有数据",
        "sInfo":"显示 _START_ 到 _END_ ,总计_TOTAL_数据",
        "sInfoEmpty":"显示 0 到 0 , 总计0数据",
        "sSearch": "检索",
        "sProcessing": "系统正在处理...",
        "sInfoFiltered":"(过滤_MAX_数据)" }
        }
     );
  })

  function rigmachine_resume(devicenumber)
  {
    window.location.href="<%=rigmachine_resume_path %>?devicenumber="+devicenumber
  }

  function drilltower_resume(devicenumber)
  {
    window.location.href="<%=drilltower_resume_path %>?devicenumber="+devicenumber
  }

  function pump_resume(devicenumber)
  {
    window.location.href="<%=pump_resume_path %>?devicenumber="+devicenumber
  }
</script>
<% end %>
