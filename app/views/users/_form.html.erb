<%= content_for :page_specific_stylesheets do %>
  <%= stylesheet_link_tag 'datepicker' %>
<% end %>
<%= content_for :page_specific_javascripts do %>
  <%= javascript_include_tag 'jquery-ui-1.10.2.custom.min' %>
  <%= javascript_include_tag 'date-time/bootstrap-datepicker.min' %>
  <%= javascript_include_tag 'date-time/locales/bootstrap-datepicker.zh-CN' %>
  <%= javascript_include_tag 'chosen.jquery.min' %>
<% end %>
<%= content_for :inline_javascripts do %>
  <%= make_datepicker("#user_birthday") %>
  <%= change_account_display_or_not %>
<% end %>

<%= form_for([@department, @user],:html => {:class => 'form-horizontal'}) do |f| %>
  <div class="row-fluid">
    <div class="span12">
      <% if @user.errors.any? %>
        <div class="row-fluid">
          <div id="error_explanation" class="span12">
            <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
            <ul>
              <% @user.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        </div>
      <% end %>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%= f.label :name, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :name %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%= f.label :sex, :class => 'control-label' %>
            <div class="controls">
              <%= f.select :sex, User::SEXS, {}, :class=>"span3" %>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%= f.label :birthday, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :birthday %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%= f.label :duty, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :duty %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%= f.label :education, :class => 'control-label' %>
            <div class="controls">
              <%= f.select :education, User::EDUCATION, {:prompt => t('prompt.select')}, {:class=>"span5"} %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%= f.label :mobile, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :mobile %>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%= f.label :officephone, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :officephone %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%= f.label :email, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :email %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <div class="controls">
              <label>
                <%= f.check_box :isappuser, :id => "isappuser" %>
                <span class="lbl"> <%= User.human_attribute_name("isappuser") %></span>
              </label>
            </div>
          </div>
        </div>
        <div class="span6">
          <div id="account_field" class="control-group hidden">
            <%= f.label :account, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :account %>
            </div>
          </div>
        </div>
      </div>

      <div id="role_field" class="row-fluid hidden">
        <div class="span12">
          <div class="control-group">
            <%= f.label :role, :class => "control-label" %>
            <div class="controls">
              <label>
              <% @roles.each do |role| %>
                <%= check_box_tag "user[role_ids][]", role.id, @user_roles.include?(role.id), :id=>"role_ids_#{role.id}" %><span class="lbl"> <%= role.name %></span>
              <% end %>
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row-fluid">
        <div class="span12">
          <div class="form-actions">
            <%= f.submit t('labels.save'), :class => 'btn btn-primary'%>
            <%= link_back :class => "btn" %>
          </div>
        </div>
      </div>
    </div>
  </div>
  
<% end %>

